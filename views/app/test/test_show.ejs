<% include ../partials/header %>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark d-block" id="second_navbar">
    <div class="container" id="mainNavigation">    
		<label for="f-upload" class="custom-file-upload">
			<input type="button" data-toggle="modal" data-target="#myModal" class="btn btn-info" value="add">
		</label>
    </div>
</nav>

<!-- The Modal -->
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/tests/<%=test._id%>?_method=PUT" method="POST">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Add A Question</h4>
                </div>

                <!-- Modal body -->
                <div class="modal-body">

                    <div class="form-group">
                        <label for="f-question" class="sr-only">Question</label>
                        <input type="text" class="form-control" name="question" id="f-question"
                            placeholder="Enter a question" required>
						
						<label for="f-field" class="sr-only">Field</label>
                        <input type="text" class="form-control" name="field" id="f-field"
                            placeholder="Enter medical field" required>
						
						<label for="f-answer1" class="sr-only">Answer 1</label>
                        <input type="text" class="form-control" name="answer1" id="f-answer1"
                            placeholder="Enter first answer" required>
						
						<label for="f-answer2" class="sr-only">Answer 2</label>
                        <input type="text" class="form-control" name="answer2" id="f-answer2"
                            placeholder="Enter second answer" required>
						
						<label for="f-answer3" class="sr-only">Answer 3</label>
                        <input type="text" class="form-control" name="answer3" id="f-answer3"
                            placeholder="Enter third answer" required>
						
						<label for="f-answer4" class="sr-only">Answer 4</label>
                        <input type="text" class="form-control" name="answer4" id="f-answer4"
                            placeholder="Enter fourth answer" required>
						
						<label for="f-solution" class="sr-only">Solution</label>
                        <input type="text" class="form-control" name="solution" id="f-solution"
                            placeholder="Enter the solution" required>
                    </div>

               		<!-- a form that adds one question after the other: need javascript -->
					<!--
                    <div class="form-group">
                        <label for="f-question" class="sr-only">Notes</label>
                        <textarea class="form-control" name="question[question]" id="f-question" rows="3"
                            placeholder="The question"></textarea>
                    </div>
				  	-->
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Create</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>
    <div class="container">
        <div class="col-md-12 pt-4 mt-0">

			<h3 id="test"><%= test.topic %></h3>
			<form action="/tests/<%=test._id%>" method="POST">
			
			 <% if (test.questions.length > 0) { %>
				<% test.questions.forEach(function(question){ %>
					<div class="card text-white bg-dark mt-3">
						<div class="card-header d-flex justify-content-between" style="background-color: black">
							<%= question.question %>
						</div>
						<ul class="list-group list-group-flush">
							<% question.answers.forEach(function(answer){ %>
								<li class="list-group-item bg-dark border-right border-bottom border-left border-dark">
							<input type="radio" class="answer" name="answers[<%=question._id%>]" value="<%=answer.id%>" required> <%= answer.answer %>
								
							</li>
							<% }) %>
							
							<input type="hidden" name="solutions[<%=question._id%>]" value="<%=question.solution%>">
						</ul>
					</div>
				<% }) %>
				<div class='form-bottom'>
					<input type='submit' value='Submit' class='submit-button'>
				</div>
				
			<% } %>
			</form>	
			<!--	<ul>
				<li><%= test._id %></li>
				<li><%= test.topic %></li>
				<% if(test.questions.length > 0){ %>
				<ol>
				<% test.questions.forEach(function(question){ %>
				
					<li>
						<%= question.field %> : <%= question.question %>
						<ol>
						<% question.answers.forEach(function(answer){ %>
							<li><%= answer %></li> 	   
						<% }) %>
							<li>SOLUTION: <%= question.solution %></li>
						</ol>
					</li>
				
				<% }) %>
				</ol>
				<% } else { %>
					<li>No Questions</li>
				<% } %>
				<li><%= test.number %></li>
				<li><%= test.__v %></li>
			</ul>

			-->


        </div>
    </div>


<% include ../partials/footer %>