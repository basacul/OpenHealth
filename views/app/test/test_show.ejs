<% include ../partials/header %>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark d-block" id="second_navbar">
    <div class="container" id="mainNavigation">    
		<label for="f-upload" class="custom-file-upload">
			<input type="button" data-toggle="modal" data-target="#myModal" class="btn btn-info" value="add">
		</label>
    </div>
</nav>

<div class="container">
	<div class="col-md-12 pt-4 mt-0">

		<h3 id="test"><%= test.topic %></h3>
		<form action="/tests/<%=test._id%>" method="POST">

		 <% if (test.questions.length > 0) { %>
			<% test.questions.forEach(function(question){ %>
			<div class="card mt-5 neomorphic-box">
				<% if(question.img){ %>
				<div class="card">
				  <img class="card-img-top" src="<%=question.img%>" alt="Card image cap">
				</div>
				<% } %>
				<div class="card-header d-flex justify-content-between">
					<%= question.question %>
				</div>
				<ul class="list-group list-group-flush">
					<% question.answers.forEach(function(answer){ %>
					<li class="list-group-item">
						<input type="radio" class="answer" name="answers[<%=question._id%>]" value="<%=answer.id%>" required> <%= answer.answer %>

					</li>
					<% }) %>
					<input type="hidden" name="solutions[<%=question._id%>]" value="<%=question.solution%>">
				</ul>
			</div>
			<% }) %>
			
			<input type='submit' value='Submit' class='submit-button'>
			

		<% } %>
		</form>	
	</div>
</div>


<!-- The Modal -->
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/tests/<%=test._id%>?_method=PUT" method="POST">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Add A Question</h4>
                </div>

                <!-- Modal body -->
                <div class="modal-body">

                    <div class="form-group">
                        <label for="f-type">Type of Question: </label>
						<select id="f-type">
							<option name="type" value="A">Type A Question</option>
							<option name="type" value="B">Type B Question</option>
							<option name="type" value="C">Type C Question</option>
							<option name="type" value="D">Type D Question</option>
						</select>
						
						<label for="f-question" class="sr-only">Question</label>
                        <textarea class="form-control" name="question" id="f-question" rows="2" 
                            placeholder="Enter a question" required></textarea>
						<label for="f-image" class="sr-only">Image</label>
                        <input type="text" class="form-control" name="image" id="f-image"
                            placeholder="Enter url to the image (optional)">
						
						<label for="f-field" class="sr-only">Field</label>
                        <input type="text" class="form-control" name="field" id="f-field"
                            placeholder="Enter medical field" required>
						
						<label for="f-answer1" class="sr-only">Answer 1</label>
                        <textarea class="form-control" name="answer1" id="f-answer1" rows="2"
                            placeholder="Enter first answer" required></textarea>

						<label for="f-answer2" class="sr-only">Answer 2</label>
                        <textarea class="form-control" name="answer2" id="f-answer2" rows="2"
                            placeholder="Enter second answer" required></textarea>
						
						<label for="f-answer3" class="sr-only">Answer 3</label>
                        <textarea class="form-control" name="answer3" id="f-answer3" rows="2"
                            placeholder="Enter third answer" required></textarea>
						
						<label for="f-answer4" class="sr-only">Answer 4</label>
                        <textarea class="form-control" name="answer4" id="f-answer4" rows="2"
                            placeholder="Enter fourth answer" required></textarea>
						
						<label for="f-answer5" class="sr-only">Answer 5</label>
                        <textarea class="form-control" name="answer5" id="f-answer5" rows="2"
                            placeholder="Enter fifth answer" required></textarea>
						
						<label for="f-solution" class="sr-only">Solution</label>
                        <input type="text" class="form-control" name="solution" id="f-solution"
                            placeholder="Enter the solution" required>
						
						<label for="f-explanation" class="sr-only">Explanation</label>
                        <textarea class="form-control" name="explanation" id="f-explanation" rows="3"
                            placeholder="Enter your explanation" required></textarea>
                    </div>

               		<!-- a form that adds one question after the other: need javascript -->
					<!--
                    <div class="form-group">
                        <label for="f-question" class="sr-only">Notes</label>
                        <textarea class="form-control" name="question[question]" id="f-question" rows="3"
                            placeholder="The question"></textarea>
                    </div>
				  	-->
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Create</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>

<% include ../partials/footer %>